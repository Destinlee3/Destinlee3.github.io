---
layout: post
title:  "축구에서 피타고리안 승률을 적용한 승점 예측"
summary: 회귀분석
author: destinlee3
date: '2022-05-31 10:33:00 +0900'
category: jekyll
---

# 축구에서 피타고리안 승률을 적용한 승점 예측

1. Proposal

교통, 통신, 미디어 등의 기술이 발달함에 따라 이제 세계 각국에서 열리는 스포츠 경기를 시공간 제약없이 누구나 즐길 수 있게 되면서 더 많은 사람들이 스포츠를 즐길 수 있게 되었다. 본인 또한 여러 스포츠를 사랑하고 즐겨본다. 그 중에서도 해외축구에 관심이 많고 프리미어리그 등 다양한 리그의 경기를 즐겨본다.

매년 시즌이 시작할 때마다 슈퍼컴퓨터가 기존 통계자료를 바탕으로 그 해의 성적을 예측하고 수많은 배팅업체들이 서로 다른 기준들을 바탕으로 배당을 매긴다. 팀 성적 뿐만 아니라 각 개개인 플레이와 결과 값에 대해서도 다양한 의미 있는 지표들을 생산해내고 활용한다. 현대 스포츠에서 데이터는 단순 상대 분석을 넘어 경기 결과 예측과 전략 수립 및 수정, 훈련 적응, 경기력 향상 등 다방면으로 활용된다. 데이터 분석은 선택이 아닌 필수로 여겨지는 분위기다. 데이터분석은 시간이 갈수록 정교화되고 있고, 그러한 데이터 분석을 바탕으로 의미 있는 지표를 만들어낸다.

브래드 피트 주연인 영화 ‘머니볼’에서 볼 수 있듯이, 스포츠에서 통계를 활용하는 ‘세이버매트릭스’라는 개념은 야구에서 빨리 자리 잡게 되었다. 야구라는 종목의 특성상 한 타자 한 타자 플레이가 끊어져 독립시행으로 이뤄지다 보니까 보다 의미 있는 지표를 만들어 내기 쉬웠기 때문이다. 
반면 축구는 멈추지 않고 상황이 동시다발적으로 발생하는 스포츠이다 보니 골, 파울, 옐로/레드 카드, 교체 및 출전시간 정도는 쉽게 집계할 수 있지만, 다른 지표들은 그 기준을 설정하는 게 너무 어려워 통계 지표가 사용된 것은 다른 종목에 비하여 그리 오래 되지는 못했다.

야구에서는 득점과 실점을 바탕으로 해당 팀의 승률을 예측하는 ‘피타고리안 승률’이 있다. 야구라는 종목이 득점을 많이 하고 실점을 적게 하면 이기는 스포츠라는 단순한 사실에서 시작되었고, 농구 등 여타 비슷한 종목에서 또한 잘 들어맞는 공식이다. 그렇다면 역시 축구에서 또한 해당 팀의 득실점과 승률(승점)이 일정한 상관관계를 가져야 할 것이다. 아래 글은 축구에서의 골득실과 승률(승점) 간의 상관관계를 찾아 나가는 과정을 담아냈다.




2. Existing Studies

야구에서 활용되는 ‘피타고리안 승률’은 빌 제임스가 고안한 것으로 팀의 득점과 실점을 바탕으로 얼마나 승리할 수 있는지를 예측하는 것이다.

기대할 수 있는 승리 수 = 득점^2 / (득점^2 + 실점^2)

철저하게 득점과 실점을 가지고 계산하기 때문에 득점에서 실점을 뺀 득실마진과 비례하는 경향이 있다. 예컨대, 득점이 실점의 2배이면 피타고리안 승률이 정확히 8할이 되며, 득실마진이 0이면 피타고리안 승률은 정확하게 5할이 된다. 또한 득점이 실점의 3/4에 불과하면 정확히 0.36이 되고 반대로 득점이 실점의 4/3배가 되면 정확히 0.64가 된다. 기존 공식에서는 득점과 실점의 지수에 2를 사용하고 있지만, 보다 정확한 값을 만들어 내기 위해서 종목에 따라 다른 변형된 값을 넣기도 한다. 예로 미국 야구 전문통계사이트 베이스볼 레퍼런스는 1.83을 대입하고, 농구에 피타고라스 승률을 접목한 바스켓볼 레퍼런스는 14를 대입한다고 한다. 피타고리안 승률로 예측한 값보다 적게 승리하는 팀은 운이 없었다고 볼 수 있고 기대값을 뛰어넘는 클럽은 운이 좋았다고 할 수 있다. 야구에서 널리 알려진 이 공식은 야구의 승률을 예측하는데 있어서 굉장히 잘 들어맞고 있고 미식축구, 농구 등에서도 굉장히 성공적으로 활용되고 있다.

그러나 축구 경기에서는 이 공식이 잘 들어맞지 않는다. 야구는 시즌 중반 전력 변화가 크지 않지만, 축구는 시즌 중반에도 이적시장이 진행되며 전력차이가 심할 수 있다. 이로 인해 결과값이 튈 수 있다는 점이다. 그 예로 감독이 바뀌고 겨울 이적시장에서 영입한 선수들이 대활약을 펼치며 전반기와는 다른 팀으로 변모한 21/22 시즌 뉴캐슬을 들 수 있을 것이다. 또한, 야구는 득점이 많이 나는 반면에 축구는 득점 수가 적고, 대부분의 경기가 1, 2점 차이로 결과가 갈리는 것 또한 공식이 잘 맞지 않는 이유 중 하나이다. 유럽 대부분의 리그에서는 ‘승’을 3점, ‘무’를 1점, ‘패’를 0점을 주는 승점제 방식으로 리그를 운영하고 있다. 이 공식을 처음 적용한 야구 mlb리그에는 무승부가 없고, 무승부가 있는 kbo리그에서조차도 전체 시즌경기 대비 무승부는 극히 일부이다. 하지만, 축구에서는 무승부가 많다. 피타고리안 예측법은 오직 승리와 패배를 예측할 뿐이다. 무득점을 할 경우 피타고리안 승률로는 승점을 가져가기 못할 텐데, 실제 0:0 무승부가 되어도 승점을 획득할 수 있다.

아래 순위표는 2011/12 순위표이다. 기존 빌 제임스의 공식은 상위권팀의 성적을 고평가하고 하위권팀의 성적을 저평가 하고 있다는 점을 알 수 있다.


3. Dataset

데이터는 Website skysports에서 웹 크롤링하여 얻은 리그 테이블을 사용하였다. 

아래는 2021/22시즌 프리미어리그 테이블 데이터프레임을 얻는 과정이다.

피타고리안 승률을 어느 한 외국 포럼에서 축구에서 지수를 1.2로 사용하는 점을 착안하여 1.2로 계산하였다. 


4.Methodology

아래 3가지 사항에 대해서 회귀분석을 진행보았다.

1) 골득실과 실제 승률 간의 상관관계
2) 골득실과 피타고리안 승률 간의 상관관계
3) 실제 승점과 피타고리안 승점 간의 상관관계

5.Evaluation

단순회귀분석에서 기울기 값이 1에 가까우면 두 변수 간 선형관계를 가진다고 할 수 있다.

1) 골득실과 실제 승률 간의 상관관계
<골득실-승률> 절편:0.380, 기울기:0.005, 평균 제곱 오차:0.003

2) 골득실과 피타고리안 승률 간의 상관관계
<골득실-피타고리안 승률> 절편:0.495, 기울기:0.005, 평균 제곱 오차

3) 실제 승점과 피타고리안 승점 간의 상관관계
<승점-피타고리안 승점> 절편:6.818, 기울기:0.954, 평균제곱오차:19.365 

6.Conclusion

피타고리안 승률을 통해 실제 승점을 예측하는 것은 둘 간의 어느정도 유사성을 띄기 때문에 미래 예측에 가치 있는 시도로 평가할 수 있다. 하지만, 이 공식은 미래의 성적을 나타낸다기보다 이미 일어난 결과를 바탕으로 통계를 내는 후행지표이기 때문에 미래 예측에 유의미한 값을 내는 것에 한계가 있다고 느껴졌다. 내가 분석한 프리미어리그 21/22시즌을 봤을 때 모든 팀의 피타고리안 승률은 각 팀의 실제 승률보다 많이 높았다. 아마도 이는 야구에서 사용하는 공식을 그대로 축구로 끌어들여와 축구에서의 무승부를 고려하지 못한 결과를 해석된다. 골득실과 실제 승률이든 피타고라스 승률이든 선형관계를 찾아보기 힘들었다. 골득실을 통해서 해당 팀의 승점,순위를 파악하기에는 많은 오차가 있었다. 그래도 피타고리안 공식에 적당히 변형된 값을 넣으면 어느정도 유의미한 값을 나타내게 할 가능성 정도는 보였다. 앞서 서론에서 말했듯이, 축구는 데이터를 수식화해서 표현 하는게 굉장히 어려운 종목이다. 그래도 2000년대 이후로 옵타(Opta) 등의 사이트와 xG값(기대득점), CC(Chance Created) 등과 같은 유의미한 지표들이 많이 나왔고, 지금도 많은 데이터를 바탕으로 무수히 많은 연구가 진행 중이다. 스포츠에서 데이터가 갖는 비중이 커짐에 따라 앞으로도 이러한 스포츠 속에서 통계 분석은 계속 될 것으로 예상된다.


